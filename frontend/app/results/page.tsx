// app/results/page.tsx
import React from "react";
import { Suspense } from "react";
import Navbar from "@/components/navbar";
import Link from "next/link";

function ResultsInner() {
  // In Next.js App Router, read search params via URL API on client or via props on server.
  // This page is a Server Component by default; we can parse from "searchParams" if we declared it
  // in the page signature, but to keep minimal, read from window is not possible on server.
  // Instead, define the page to accept searchParams.
  return null as any;
}

export default function Page({ searchParams }: { searchParams: { [key: string]: string | string[] | undefined } }) {
  const kind = (searchParams["kind"] as string) || "unknown";
  const text = (searchParams["text"] as string) || "";
  const url = (searchParams["url"] as string) || "";
  const fileName = (searchParams["fileName"] as string) || "";
  const fileType = (searchParams["fileType"] as string) || "";

  const hasText = !!text;
  const hasUrl = !!url;
  const hasFile = !!fileName;

  return (
    <main className="bg-black text-white min-h-screen">
      <Navbar />
      <section className="py-10 px-6">
        <div className="max-w-5xl mx-auto">
          <h1 className="text-3xl font-bold mb-2">Analysis Results</h1>
          <p className="text-gray-400 mb-8">Preview of the information that would be generated by the AI system. This is a UI scaffold.</p>

          <div className="grid md:grid-cols-3 gap-6">
            <div className="md:col-span-2 space-y-6">
              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Your Input</h2>
                <div className="space-y-2 text-gray-300">
                  <p><span className="text-gray-500">Type:</span> {kind}</p>
                  {hasText && (
                    <div>
                      <p className="text-gray-500">Text:</p>
                      <p className="whitespace-pre-wrap bg-black/40 border border-gray-800 rounded-md p-3 text-sm">{text}</p>
                    </div>
                  )}
                  {hasUrl && (
                    <p><span className="text-gray-500">URL:</span> <a className="text-purple-400 underline" href={url} target="_blank" rel="noreferrer">{url}</a></p>
                  )}
                  {hasFile && (
                    <p><span className="text-gray-500">File:</span> {fileName} <span className="text-gray-500">({fileType})</span></p>
                  )}
                </div>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Classification</h2>
                <div className="flex items-center gap-3">
                  <span className="inline-block w-3 h-3 rounded-full bg-yellow-500"></span>
                  <p className="text-gray-300">Status: Unverifiable (demo)</p>
                </div>
                <p className="text-gray-400 mt-3 text-sm">In a full system, an LLM would analyze the content, cross-check with fact sources, and provide a determination such as likely true / misleading / fabricated / unverifiable along with reasoning.</p>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Reasoning & Explanation</h2>
                <ul className="list-disc ml-6 text-gray-300 space-y-1">
                  <li>Checks for source credibility and presence of citations.</li>
                  <li>Detects emotionally manipulative or clickbait language.</li>
                  <li>Compares claims with authoritative sources (e.g., Wikipedia, WHO, PIB).</li>
                  <li>Flags contradictions and lack of corroborating evidence.</li>
                </ul>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Suggested Sources</h2>
                <ul className="list-disc ml-6 text-purple-300">
                  <li><a className="underline" href="https://www.pib.gov.in/" target="_blank" rel="noreferrer">PIB Press Information Bureau</a></li>
                  <li><a className="underline" href="https://www.who.int/" target="_blank" rel="noreferrer">World Health Organization</a></li>
                  <li><a className="underline" href="https://en.wikipedia.org" target="_blank" rel="noreferrer">Wikipedia</a></li>
                </ul>
              </div>
            </div>

            <div className="space-y-6">
              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Credibility Score</h2>
                <div className="flex items-center gap-4">
                  <div className="w-24 h-24 rounded-full border-4 border-yellow-500 flex items-center justify-center text-2xl font-bold">--%</div>
                  <div>
                    <p className="text-gray-300">Traffic Light Indicator</p>
                    <div className="flex gap-2 mt-2">
                      <span className="w-3 h-3 rounded-full bg-red-600"></span>
                      <span className="w-3 h-3 rounded-full bg-yellow-500"></span>
                      <span className="w-3 h-3 rounded-full bg-green-600"></span>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Next Steps</h2>
                <ol className="list-decimal ml-6 text-gray-300 space-y-1 text-sm">
                  <li>Look for credible sources with matching claims.</li>
                  <li>Beware of emotional trigger words and missing citations.</li>
                  <li>Reverse image search for images or keyframes for videos.</li>
                </ol>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5">
                <h2 className="text-xl font-semibold mb-3">Language</h2>
                <p className="text-gray-400 text-sm">In the complete product, results would be available in local languages (e.g., Hindi, Tamil, Bengali) with simplified summaries.</p>
              </div>

              <div className="bg-gray-900 rounded-xl border border-gray-800 p-5 text-center">
                <Link href="/" className="bg-gradient-to-r from-pink-500 to-purple-600 px-6 py-3 rounded-lg font-semibold text-white inline-block">New Check</Link>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  );
}
